console.log(Phaser.AUTO);var levelText,scoreText,gameOverText,resetGameText,rocketCollider,config={type:Phaser.AUTO,width:432,height:480,physics:{default:"arcade",arcade:{debug:!1}},scene:{preload:preload,create:create,update:update},autoCenter:!0,parent:"game-div"},game=new Phaser.Game(config),gameOver=!1,canResume=!1,rocketAsset="rocket-green",rocketCount=0,rocketVelocity=50,level=1,score=0;function preload(){this.load.image("background","assets/background.png"),this.load.image("portal","assets/portal.png"),this.load.image("ep","assets/ep.png"),this.load.image("rocket-pink","assets/rocket-pink.png"),this.load.image("rocket-green","assets/rocket-green.png"),this.load.image("star","assets/star.png"),this.load.audio("collect-star-audio",["assets/audio/collect-star.wav"]),this.load.audio("collect-all-stars-audio",["assets/audio/collect-all-stars.wav"]),this.load.audio("game-over-audio",["assets/audio/game-over.wav"]),this.load.audio("level-up-audio",["assets/audio/level-up.wav"]),this.load.audio("background-music",["assets/audio/background-music.wav"])}function create(){console.log("useragent?",navigator.userAgent),background=this.add.image(216,240,"background"),startPortal=this.physics.add.sprite(216,460,"portal"),(endPortal=this.physics.add.sprite(216,20,"portal")).setSize(80,20),endPortal.setImmovable(!0),updateStars(stars=this.physics.add.group()),this.physics.add.collider(endPortal,stars),(levelText=this.add.text(5,5,"level:"+level,{fontSize:"30px",fill:"#d4996a"})).setStroke("#252945",2),levelText.setDepth(999999999999),(scoreText=this.add.text(5,35,"score:"+score,{fontSize:"30px",fill:"#d4996a"})).setStroke("#252945",2),scoreText.setDepth(999999999999),updateRockets(rockets=this.physics.add.group()),rocketRectangles=this.physics.add.group(),updateRocketRectangles(this,rocketRectangles),(player=this.physics.add.sprite(216,444,"ep")).setCollideWorldBounds(!0),player.setSize(18,18),player.setBounce(.5),player.setDepth(99999999999),this.physics.add.overlap(player,stars,collectStar,null,this),rocketCollider=this.physics.add.collider(player,rocketRectangles,hitRocket,null,this),this.physics.add.overlap(player,endPortal,reachEndPortal,null,this),cursors=this.input.keyboard.createCursorKeys(),wasdCursors=this.input.keyboard.addKeys({up:Phaser.Input.Keyboard.KeyCodes.W,down:Phaser.Input.Keyboard.KeyCodes.S,left:Phaser.Input.Keyboard.KeyCodes.A,right:Phaser.Input.Keyboard.KeyCodes.D}),starSoundEffect=this.sound.add("collect-star-audio"),collectAllStarsSoundEffect=this.sound.add("collect-all-stars-audio"),gameOverSoundEffect=this.sound.add("game-over-audio"),levelUpSoundEffect=this.sound.add("level-up-audio"),backgroundMusic=this.sound.add("background-music"),console.log("useragent",navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&console.log("mobile device")}function collectStar(e,t){t.disableBody(!0,!0),score+=5*level,scoreText.setText("score:"+score),starSoundEffect.play(),0===stars.countActive(!0)&&(score+=50,scoreText.setText("score:"+score),starSoundEffect.stop(),collectAllStarsSoundEffect.play(),rocketCollider.active=!1,e.setBlendMode(Phaser.BlendModes.ADD))}function updateStars(e){e.createMultiple({key:"star",repeat:3,setXY:{x:80,y:80,stepX:100}}),e.createMultiple({key:"star",repeat:3,setXY:{x:80,y:200,stepX:100}}),e.createMultiple({key:"star",repeat:3,setXY:{x:80,y:320,stepX:100}});var t=1;e.getChildren().map(e=>{e.setVelocity(Phaser.Math.Between(-20,20),Phaser.Math.Between(-20,20)),e.setCollideWorldBounds(!0),e.setBounce(1),e.setDepth(t%2==0?1:3),t++})}function toRadians(e){return e*(Math.PI/180)}function setRocketVelocity(e,t,s){e.setAngle(t),e.setVelocity(s*Math.cos(toRadians(t)),s*Math.sin(toRadians(t)))}function updateRockets(e){for(level%2!=0&&1!=level||rocketCount++,rocketVelocity+=5,i=0;i<rocketCount;i++){var t,s=rocketVelocity+Phaser.Math.Between(-20,20),a=i%2==0?((t=e.create(-100,Phaser.Math.Between(50,400),rocketAsset)).setData("left",!0),Phaser.Math.Between(-60,60)):(rocketAsset="rocket-green"==rocketAsset?"rocket-pink":"rocket-green",(t=e.create(430,Phaser.Math.Between(50,400),rocketAsset)).setData("left",!1),t.setFlip(!1,!0),Phaser.Math.Between(-140,-220));setRocketVelocity(t,a,s),t.setData("angle",a),t.setData("velocity",s),t.setData("rocketName","rocket-"+i),t.setDepth(2)}}function addRocketRectangle(e,t,s,a,o,r,c){e=e.add.rectangle(s.x+r,s.y+c,40,40);t.add(e),e.setAngle(a),e.body.velocity.x=o*Math.cos(toRadians(a)),e.body.velocity.y=o*Math.sin(toRadians(a)),e.setData("rocketName",s.getData("rocketName")),e.setData("offsetX",r),e.setData("offsetY",c)}function updateRocketRectangles(r,c){rockets.getChildren().map(e=>{var t=e.getData("angle"),s=e.getData("velocity"),a=60*Math.cos(toRadians(t))/2,o=60*Math.sin(toRadians(t))/2;addRocketRectangle(r,c,e,t,s,-a,-o),addRocketRectangle(r,c,e,t,s,a,o)})}function tweenComplete(){score+=10*++level,levelText.setText("level:"+level),scoreText.setText("score:"+score),canResume=!0}function reachEndPortal(e,t){this.physics.pause(),rockets.clear(!0,!0),rocketRectangles.clear(!0,!0),stars.clear(!0,!0),starSoundEffect.stop(),collectAllStarsSoundEffect.stop(),levelUpSoundEffect.play(),e.setBlendMode(Phaser.BlendModes.NORMAL),this.tweens.add({targets:e,alpha:0,ease:"Cubic.easeOut",duration:500,repeat:1,yoyo:!0,onYoyo:function(){e.setPosition(216,438),e.setVelocity(0,0)},onComplete:function(){tweenComplete()}})}function hitRocket(e,t){this.physics.pause(),background.setTint(8687521),rockets.setTint(8687521),stars.setTint(8687521),startPortal.setTint(8687521),endPortal.setTint(8687521),e.setTint(10564967),this.tweens.add({targets:e,angle:360,duration:1500,repeat:-1}),(gameOverText=this.add.text(58,200,"game over!",{fontSize:"56px",fill:"#79bee0"})).setStroke("#252945",2),gameOverText.setDepth(999999999999),(resetGameText=this.add.text(15,256,"press spacebar to play again",{fontSize:"24px",fill:"#79bee0"})).setStroke("#252945",2),resetGameText.setDepth(999999999999),gameOver=!0,starSoundEffect.stop(),collectAllStarsSoundEffect.stop(),levelUpSoundEffect.stop(),gameOverSoundEffect.play()}function checkInWorld(e,t){return Phaser.Geom.Rectangle.Overlaps(e.scene.physics.world.bounds,t.getBounds())}function repositionRocket(e,t){checkInWorld(e,t)||(t.getData("left")?t.body.x=-100:t.body.x=430,t.body.y=Phaser.Math.Between(50,400),repositionRocketRectangles(t))}function repositionRocketRectangles(t){rocketRectangles.getChildren().filter(e=>e.getData("rocketName")==t.getData("rocketName")).map(e=>{e.body.x=t.body.x+38+e.getData("offsetX"),e.body.y=t.body.y+e.getData("offsetY")})}function update(){player.setDamping(!0);var e=.15,t=(rockets.getChildren().map(e=>{repositionRocket(this.scene,e)}),gameOver&&cursors.space.isDown&&(rocketVelocity=50,score=rocketCount=0,gameOver=!(level=1),player.setBlendMode(Phaser.BlendModes.NORMAL),this.scene.restart()),this.physics.world.isPaused&&canResume&&!gameOver&&cursors.left.isUp&&cursors.right.isUp&&cursors.up.isUp&&cursors.down.isUp&&wasdCursors.left.isUp&&wasdCursors.right.isUp&&wasdCursors.up.isUp&&wasdCursors.down.isUp&&(updateStars(stars=this.physics.add.group()),this.physics.add.collider(endPortal,stars),this.physics.add.overlap(player,stars,collectStar,null,this),updateRockets(rockets=this.physics.add.group()),rocketRectangles=this.physics.add.group(),updateRocketRectangles(this,rocketRectangles),rocketCollider=this.physics.add.collider(player,rocketRectangles,hitRocket,null,this),this.physics.resume(),canResume=!1),180);cursors.left.isDown||wasdCursors.left.isDown?player.setVelocityX(-t):cursors.right.isDown||wasdCursors.right.isDown?player.setVelocityX(t):(cursors.left.isUp||wasdCursors.left.isUp||cursors.right.isUp||wasdCursors.right.isUp)&&player.setDragX(e),cursors.up.isDown||wasdCursors.up.isDown?player.setVelocityY(-t):cursors.down.isDown||wasdCursors.down.isDown?player.setVelocityY(t):(cursors.up.isUp||wasdCursors.up.isUp||cursors.down.isUp||wasdCursors.down.isUp)&&player.setDragY(e)}